\usepackage[utf8]{inputenc}
\usepackage[french, english]{babel}
\usepackage[T1]{fontenc}

\usepackage{amsfonts}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{stmaryrd}

\usepackage{tikz}
\usepackage{graphicx}
\usepackage{color}
\usepackage{enumitem}
\usetikzlibrary{arrows}
\usepackage{framed}
\usepackage{arydshln}
\usepackage{multirow}
\usepackage{mathtools}
\usepackage{float}
\usepackage{minitoc}
\setcounter{secnumdepth}{5}
\setcounter{tocdepth}{5}
\setcounter{minitocdepth}{1}
\renewcommand{\mtctitle}{~} % Empty minitoc titles

% References
\usepackage{hyperref}

% Bibliography
\usepackage[backend=bibtex,
            %sorting=ynt, %nty
            style=authoryear,
            natbib=true,
            maxcitenames=1,
            mincitenames=1,
            maxbibnames=99,
            backref=true]
            {biblatex}
\addbibresource{refs/datasets.bib}
\addbibresource{refs/dl_history.bib}
\addbibresource{refs/dl_understanding.bib}
\addbibresource{refs/dl_activations.bib}
\addbibresource{refs/dl_irr.bib}
\addbibresource{refs/gsp.bib}
\addbibresource{refs/toClassify.bib}
\addbibresource{refs/maths.bib}
\addbibresource{refs/scattering.bib}
\addbibresource{refs/prog_languages.bib}

% Style
\setlength\parindent{0pt}
\newcommand{\subsubsubsection}[1]{\paragraph{#1}\mbox{}\\}
\newcommand{\subsubsubsubsection}[1]{\subparagraph{#1}\mbox{}\\}

\usepackage{setspace}
\onehalfspacing % or
%\doublespacing

% numbering lines
\usepackage[left]{lineno}
%\linenumbers
%\modulolinenumbers[2]
\newcommand*\patchAmsMathEnvironmentForLineno[1]{%
  \expandafter\let\csname old#1\expandafter\endcsname\csname #1\endcsname
  \expandafter\let\csname oldend#1\expandafter\endcsname\csname end#1\endcsname
  \renewenvironment{#1}%
     {\linenomath\csname old#1\endcsname}%
     {\csname oldend#1\endcsname\endlinenomath}}% 
\newcommand*\patchBothAmsMathEnvironmentsForLineno[1]{%
  \patchAmsMathEnvironmentForLineno{#1}%
  \patchAmsMathEnvironmentForLineno{#1*}}%
\AtBeginDocument{%
\patchBothAmsMathEnvironmentsForLineno{equation}%
\patchBothAmsMathEnvironmentsForLineno{align}%
\patchBothAmsMathEnvironmentsForLineno{flalign}%
\patchBothAmsMathEnvironmentsForLineno{alignat}%
\patchBothAmsMathEnvironmentsForLineno{gather}%
\patchBothAmsMathEnvironmentsForLineno{multline}%
}

% linebreaks in math mode
%\binoppenalty=\maxdimen %700
%\relpenalty=\maxdimen %500

% Theorems
\usepackage{amsthm}
\theoremstyle{definition}
\newtheorem{definition}{Definition}[section]
\newtheorem{proposition}{Proposition}[section]
\newtheorem{claim}[proposition]{Claim}

\theoremstyle{remark}
\newtheorem{remark}{Remark}[section]

\theoremstyle{plain}

\allowdisplaybreaks[1]

% Annotations
\newcommand{\todo}[1]{\textcolor{red}{TODO: #1\\}}

% Maths
\newcommand{\bbe}{\mathbb{E}}
\newcommand{\bbi}{\mathbb{I}}
\newcommand{\bbn}{\mathbb{N}}
\newcommand{\bbr}{\mathbb{R}}
\newcommand{\bbt}{\mathbb{T}}
\newcommand{\bbv}{\mathbb{V}}
\newcommand{\bbz}{\mathbb{Z}}

\newcommand{\ca}{\mathcal{A}}
\newcommand{\cb}{\mathcal{B}}
\newcommand{\cc}{\mathcal{C}}
\newcommand{\cd}{\mathcal{D}}
\newcommand{\ce}{\mathcal{E}}
\newcommand{\cf}{\mathcal{F}}
\newcommand{\cg}{\mathcal{G}}
\newcommand{\ch}{\mathcal{H}}
\newcommand{\ci}{\mathcal{I}}
\newcommand{\cj}{\mathcal{J}}
\newcommand{\ck}{\mathcal{K}}
\newcommand{\cl}{\mathcal{L}}
\newcommand{\cm}{\mathcal{M}}
\newcommand{\cn}{\mathcal{N}}
\newcommand{\co}{\mathcal{O}}
\newcommand{\cp}{\mathcal{P}}
\newcommand{\cq}{\mathcal{Q}}
\newcommand{\ccr}{\mathcal{R}}
\newcommand{\cs}{\mathcal{S}}
\newcommand{\ct}{\mathcal{T}}
\newcommand{\cu}{\mathcal{U}}
\newcommand{\cv}{\mathcal{V}}
\newcommand{\cW}{\mathcal{W}}
\newcommand{\cx}{\mathcal{X}}
\newcommand{\cy}{\mathcal{Y}}
\newcommand{\cz}{\mathcal{Z}}

\newcommand{\seq}[1]{\{1, 2, \ldots, #1\}}
\newcommand{\sq}[1]{\{1, \ldots, #1\}}
\DeclareMathOperator{\diag}{diag}
\DeclareMathOperator{\order}{order}
%\DeclareMathOperator{\deg}{deg}
%\DeclareMathOperator{\dim}{dim}
\DeclareMathOperator{\shape}{shape}
\DeclareMathOperator{\supp}{supp}
\DeclareMathOperator{\EC}{\textsc{ec}}
\DeclareMathOperator{\OR}{\textsc{or}}
\DeclareMathOperator{\XOR}{\textsc{xor}}
\DeclareMathOperator{\AND}{\textsc{and}}
\DeclareMathOperator{\agg}{\textsc{aggregate}}
%\DeclareMathOperator{\def}{def}

\DeclareMathOperator{\scr}{\textsc{R}}
\DeclareMathOperator{\scs}{\textsc{S}}

% Acronyms
\newcommand{\iid}{\emph{i.i.d.}~}
\newcommand{\etal}{\emph{et al.}~}
\newcommand{\ie}{\emph{i.e.}~}
\newcommand{\st}{\emph{s.t.}~}
\newcommand{\eg}{\emph{e.g.}~}
\newcommand{\powth}{\text{$^\text{th}$~}}

% References
\newcommand{\figref}[1]{Figure~\ref{#1}}
\newcommand{\chapref}[1]{Chapter~\ref{#1}}
\newcommand{\appref}[1]{Appendix~\ref{#1}}
\newcommand{\secref}[1]{Section~\ref{#1}}
\newcommand{\algref}[1]{Algorithm~\ref{#1}}
\newcommand{\thref}[1]{Theorem~\ref{#1}}
\newcommand{\propref}[1]{Proposition~\ref{#1}}
\newcommand{\remref}[1]{Remark~\ref{#1}}
\newcommand{\rqref}[1]{Remark~\ref{#1}}
\newcommand{\defref}[1]{Definition~\ref{#1}}
\newcommand{\corref}[1]{Corrolary~\ref{#1}}
\newcommand{\lemref}[1]{Lemma~\ref{#1}}
\newcommand{\conjref}[1]{Conjecture~\ref{#1}}
\newcommand{\probref}[1]{Problem~\ref{#1}}
\newcommand{\quoref}[1]{Quote~\ref{#1}}
\newcommand{\tabref}[1]{Table~\ref{#1}}
%\newcommand{\eqref}[1]{(\ref{#1})} %already defined

\newcommand{\gve}{G = \langle V, E \rangle}

% hspaces
\newcommand{\h}[1]{\hspace{#1pt}}

% Keywords
\newcommand{\keywords}[1]{\textbf{\textit{Index terms---}} #1}

% For temptative plans
\newcommand{\fakechapter}[1]{%
  \par\refstepcounter{chapter}% Increase subsection counter
  \chaptermark{#1}% Add subsection mark (header)
  \addcontentsline{toc}{chapter}{\protect\numberline{\thechapter}#1}% Add subsection to ToC
}

\newcommand{\fakesection}[1]{%
  \par\refstepcounter{section}% Increase section counter
  \sectionmark{#1}% Add section mark (header)
  \addcontentsline{toc}{section}{\protect\numberline{\thesection}#1}% Add section to ToC
}

\newcommand{\fakesubsection}[1]{%
  \par\refstepcounter{subsection}% Increase section counter
  \subsectionmark{#1}% Add section mark (header)
  \addcontentsline{toc}{subsection}{\protect\numberline{\thesubsection}#1}% Add section to ToC
}