\subsection{Construction of path convolutions}

To answer the limitation of partial convolutions, given $g \in \langle \cu \rangle$ where $\cu \subset \Psi_{\EC}^*(G)$, the idea is to proceed with a foliation of $g$ into pieces, each corresponding to an edge $e \in E$, and together generating another groupoid with a different associativity law, as follows.

\begin{definition}\textbf{Path groupoid}\\
Let $\cu \subset \Psi_{\EC}^*(G)$. The \emph{path groupoid} generated from $\cu$, denoted $\cu \ltimes V$, with composition rule $\cdl$, is the groupoid obtained inductively as:
\begin{enumerate}
  \item $\cu \ltimes_0 V = \{(g,v) \in \cu \times V, v \in \cd_g \} \subset \cu \ltimes V$
  \item $((g_1,v_1) \cdots (g_n,v_n) , (h_1,u_1) \cdots (h_m,u_m)) \in \cdl \Leftrightarrow g_n(v_n) = u_1$
  \item $(g_1,v_1) \cdots (g_n,v_n) \in \cu \ltimes V \Rightarrow (g_n^{-1}, g_n(v_n)) \cdots (g_1^{-1}, g_1(v_1)) \in \cu \ltimes V$
\end{enumerate}
\end{definition}

\begin{remark}
This groupoid construction is inspired from the field of operator algebra where partial action groupoids have been extensively studied, \eg \cite{nica1994groupoid,exel1998partial,li2016partial}.
\end{remark}

\begin{definition}\textbf{Source, target, and path maps}\\
Let a path groupoid $\cu \ltimes V$. We define on it the \emph{source map}~$\alpha$, the \emph{target map}~$\beta$, and the \emph{path map}~$\gamma$, such that:
\begin{gather*}
\begin{cases}
  \alpha: (g_1,v_1) \cdots (g_n,v_n) \mapsto v_1 \in V\\
  \beta: (g_1,v_1) \cdots (g_n,v_n) \mapsto g_n(v_n) \in V\\
  \gamma: (g_1,v_1) \cdots (g_n,v_n) \mapsto g_ng_{n-1}\ldots g_1 \in \Psi_{\EC}^*(G)
\end{cases}
\end{gather*}
\end{definition}

% \begin{remark}Note that $k \in \cu \ltimes V$ doesn't imply $(\alpha(k), \beta(k)) \in \cu \ltimes V$.
% \end{remark}

\begin{remark}Note that the path groupoid can also be obtained by discrete derivation of the partial transformation groupoid (\ie $p \in \cu \ltimes V$ can be expressed as a derivative of $\gamma(p)$ \wrt $\alpha(p)$), and can thus be seen as the local structure of it.
\end{remark}

\begin{lemma}\textbf{Useful properties of $\alpha$, $\beta$, and $\gamma$}%\\
\begin{enumerate}
  \item $(p,q) \in \cdl \Leftrightarrow \beta(p) = \alpha(q)$.
  \item $\gamma$ is a groupoid partial action. Denote $p(v) := \gamma(p)(v)$.% for $p \in \cu$ and $v \in V$
  \item $\beta$ is a partial equivariant map for the groupoid partial action $\gamma$ on $V$.
\end{enumerate}
\end{lemma}

We can now define the convolution based on a path groupoid, as an equivalent of a $\varphi$-convolution where $\beta$ takes the role of $\varphi$.

\begin{definition}\textbf{Path convolution}\\
The \emph{path convolution} $\ast$, based on a path groupoid $\cu \ltimes V$, is defined for signals $s_1, s_2 \in \cs(V)$, or with a mixed expression $\ast_{\M}$ for signals $\widetilde{s_1} \in \cu \ltimes V$ and $s_2 \in \cs(V)$ as:
\begin{enumerate}[label=(\roman*)]
\item $\forall u \in V, (s_1 \ast s_2) [u] = \displaystyle\sum_{\substack{p \in \cu \ltimes V\\ \st \beta(p)=u}} s_1[\beta(\gamma(p))] \h{2} s_2[\alpha(p)]$
\item $\forall u \in V, (\widetilde{s_1} \ast_{\M} s_2) [u] = \displaystyle\sum_{\substack{p \in \cu \ltimes V\\ \st \beta(p)=u}} \widetilde{s_1}[\gamma(p)] \h{2} s_2[\alpha(p)]$
\end{enumerate}
\end{definition}

Indeed, we will see that corresponding operators are equivariant to $\cu~\ltimes~V$. To address the converse, let's introduce the following notions.

\begin{definition}\textbf{Tree-covering set}\\
Let a graph $\gve$ that is connected. A \emph{tree-covering set} is a set $\cu \subset \Psi_{\EC}^*(G)$ such that
\begin{enumerate}
  \item An edge can only correspond to a unique $g\in \cu$,\\
    \ie $\exists v \in V, g(v) = h(v) \Rightarrow g=h$
  \item The graph $G_{\cu} = \langle V, E_{\cu} \rangle$ is a covering tree graph of $G$, where\\
    $E_{\cu} = \{\{v, g(v)\} \in E, g, v \in \cu \times V\}$
\end{enumerate}
If $\cu$ is a tree-covering set, then the path convolution based on  $\cu \ltimes V$ is said to~be~\emph{rooted}.
Also, denote by $r$ the root of $G_{\cu}$.
\end{definition}

\begin{remark}The assumption that the graph $G$ is connected has been made. This doesn't lose generality as the construction can be replicated to each connected component in the general case.
\end{remark}

\begin{proposition}\textbf{Characterization by equivariance to $\cu \ltimes V$}\\
Let a set $\cu \subset \Psi_{\EC}^*(G)$, and let's base the path convolutions on $\cu \ltimes V$. Then,
\begin{enumerate}[label=(\roman*)]
  \item path convolution right operators are equivariant to~$\cu \ltimes V$,\label{enum:i}
  \item if $\cu \ltimes V$ is abelian, left partial $\M$-convolution operators are equivariant to~$\cu \ltimes V$.\label{enum:ii}
\end{enumerate}
Conversely,
\begin{enumerate}[label=(\roman*)]
  \item if $\cu \ltimes V$ is tree-covering, linear transformations of $\cs(V)$ that are equivariant to~$\cu \ltimes V$ are right path (EC*) convolution operators,
  \item if $\cu \ltimes V$ is abelian, linear transformations of $\cs(V)$ that are equivariant to~$\cu \ltimes V$ are also left partial $\M$-convolution operators.
\end{enumerate}
\end{proposition}

